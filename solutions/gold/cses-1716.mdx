---
id: cses-1716
source: CSES
title: Distributing Apples
author: Chuyang Wang
---

## Explanation

To get a more illustrative idea of the given problem, consider $n + m - 1$ white
balls in a row. Of those $n + m - 1$ white balls, $m - 1$ are chosen to be
colored black as separators, which gives us exactly $m$ segments of (possibly
zero) white balls. There are 

$$
\binom{n + m - 1}{m - 1}
$$

ways to choose the balls to color black. 

The ways to color $m - 1$ balls black corresponds to the ways to distribute
those $n$ apples to $m$ children, since the number of white balls in a segment
corresponds to the number of apples given to a child.

<Optional> 

The given problem is equivalent to finding the number of solutions for the
equation

$$
x_1 + x_2 + ... + x_n = m.
$$

</Optional>

## Implementation

**Time Complexity:** $\mathcal{O}(N)$

<LanguageSection>

<CPPSection>

```cpp
#include <bits/stdc++.h>
using namespace std;

using ll = long long;

const ll MOD = 1e9 + 7;
const int MAXN = 2e6;

ll fac[MAXN], inv[MAXN];

ll qexp(ll base, ll exp) {
	if (base < 2 || exp == 1) {
		return base;
	}
	if (exp == 0) {
		return 1;
	}

	ll sqr = qexp(base, exp / 2);
	if (exp % 2) {
		return sqr * sqr % MOD * base % MOD;
	}
	return sqr * sqr % MOD;
}

void precalc() {
	fac[0] = fac[1] = 1;
	for (int i = 2; i < MAXN; i++) {
		fac[i] = i * fac[i - 1] % MOD;
	}

	inv[MAXN - 1] = qexp(fac[MAXN - 1], MOD - 2);
	for (int i = MAXN - 2; i > 0; i--) {
		inv[i] = (i + 1) * inv[i + 1] % MOD;
	}
	inv[0] = 1;
}

ll binom(int n, int k) {
	return fac[n] * inv[k] % MOD * inv[n - k] % MOD;
}

int main() {
	precalc();

	int n, m;
	cin >> n >> m;

	cout << binom(n + m - 1, n - 1) << endl;
}
```
</CPPSection>

</LanguageSection>
