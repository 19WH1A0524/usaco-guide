---
id: usaco-1203
source: USACO bronze 2022 February
title: Sleeping in Class
author: Yiming Huang
---

[Official Analysis](http://usaco.org/current/data/sol_prob1_bronze_feb22.html)


## Explanation

After Elsie has made all the modifications to the log array $A[]$, the log will show that Bessie sleeps the same number of hours every day. Let's call that number $x$. 

Since the total number of hours won't change, we can call that number $\mathit{sum}$.

Therefore, the length of the modified log will be $\mathit{sum}/x$. Since every modification reduces the length of the log by 1, the number of modifications will be $N-\mathit{sum}/x$.

$N$ and $\mathit{sum}$ are constant, so in order to minimize $N-\mathit{sum}/x$, we need to minimize $x$ too.

In order to do that, we iterate over possible values of $x$ and checks if it's valid. If it is, then we print out the answer $N-\mathit{sum}/x$ and return the program.

In order to test if a value of $x$ is valid, we iterate over the $A[]$ from left to right and combine values. If at some point a combined value exceed $x$ then we know that $x$ is not valid.






## Implementation

**Time Complexity:** $\mathcal{O}(N \cdot (\# \, \text{divisors of } \mathit{sum}))$

<LanguageSection>
<CPPSection>

```cpp
#include <bits/stdc++.h>
using namespace std;

int N;
vector<int> A;

bool check(int x){
	int curr\mathit{sum} = 0; //keeps track of the current \mathit{sum} 
	//iterate over the vector
	for(int i = 0; i < N; i++){
		curr\mathit{sum} += A[i];
		if(curr\mathit{sum}>x) return false; //curr\mathit{sum} cannot exceed x
		else if(curr\mathit{sum}==x){
			curr\mathit{sum} = 0; //reset curr\mathit{sum}
		}
	}
	return true;
}

void solve(){
	//reading inputs
	cin >> N;
	A = vector<int>(N);
	int \mathit{sum} = 0; //\mathit{sum} of all values in the vector
	for(int i = 0; i < N; i++){
		cin >> A[i];
		\mathit{sum} += A[i];
	}

	//x is the # of hours of sleep every class AFTER modification
	//iterate over x from small to large because the smallest possible x is optimal
	
	for(int x = 0; x <= \mathit{sum}; x++){
		if(x!=0&&\mathit{sum}%x!=0){
			//\mathit{sum} must be divisible by x
			continue;
		}
		if(check(x)){
			//check(x) checks if x is a valid answer
			if(x==0){
				//special case because you can't divide by 0
				cout << 0 << endl;
			}
			else{
				//\mathit{sum}/x is the total # of classes AFTER modification
				//therefore N-\mathit{sum}/x would be the # of modifications needed
				cout << N-\mathit{sum}/x << endl; 

			}
			//there's no point trying bigger values of x, so we return and go to solve the next test case
			return;
		}
	}

}

int main() {
	int T; cin >> T;
	while(T--){
		solve();
	}
}

```

</CPPSection>
</LanguageSection>
