---
id: usaco-1203
source: USACO bronze 2022 February
title: Sleeping in Class
author: Yiming Huang
---

[Official Analysis](http://usaco.org/current/data/sol_prob1_bronze_feb22.html)


## Explanation

After Elsie has made all the modifications to the log array $A[]$, the log will show that Bessie sleeps the same number of hours every day. Let's call that number $\texttt{numHours}$. 

Since the total number of hours won't change, we can call that number $\texttt{sum}$.

Therefore, the length of the modified log will be $\texttt{sum}/\texttt{numHours}$. Since every modification reduces the length of the log by 1, the number of modifications will be $N-\texttt{sum}/\texttt{numHours}$.

$N$ and $\texttt{sum}$ are constant, so in order to minimize $N-\texttt{sum}/\texttt{numHours}$, we need to minimize $\texttt{numHours}$ too.

In order to do that, we iterate over possible values of $\texttt{numHours}$ and checks if it's valid. If it is, then we print out the answer $N-\texttt{sum}/\texttt{numHours}$ and return the program.

In order to test if a value of $\texttt{numHours}$ is valid, we iterate over the $A[]$ from left to right and combine values. If at some point a combined value exceed $\texttt{numHours}$ then we know that $\texttt{numHours}$ is not valid.

## Implementation

**Time Complexity:** $\mathcal{O}(N \cdot (\# \, \text{divisors of } \texttt{sum}))$

<LanguageSection>
<CPPSection>

```cpp
#include <bits/stdc++.h>
using namespace std;

int N;
vector<int> A;

bool check(int numHours) {
	int currsum = 0;  // keeps track of the current sum
	// iterate over the vector
	for (int i = 0; i < N; i++) {
		currsum += A[i];
		if (currsum > numHours) {
			return false;  // currsum cannot exceed x
		}
		else if (currsum == numHours) {
			currsum = 0;  // reset currsum
		}
	}
	return true;
}

void solve() {
	// reading inputs
	cin >> N;
	A = vector<int>(N);
	int sum = 0; // sum of all values in the vector
	for (int i = 0; i < N; i++)
	{
		cin >> A[i];
		sum += A[i];
	}

	// numHours is the # of hours of sleep every class AFTER modification
	// iterate over numHours from small to large because the smallest possible numHours is optimal
	for (int numHours = 0; numHours <= sum; numHours++) {
		if (numHours != 0 && sum % numHours != 0) {
			// sum must be divisible by numHours
			continue;
		}
		if (check(numHours)) {
			// check(numHours) checks if numHours is a valid answer
			if (numHours == 0) {
				// special case because you can't divide by 0
				cout << 0 << endl;
			} else {
				// sum/numHours is the total # of classes AFTER modification
				// therefore N-sum/numHours would be the # of modifications needed
				cout << N - sum / numHours << endl;
			}
			// there's no point trying bigger values of numHours, so we return and go to solve the next test case
			return;
		}
	}
}

int main() {
	int T;
	cin >> T;
	for (int t = 0; t < T; t++) {
		solve();
	}
}
```

</CPPSection>
</LanguageSection>
